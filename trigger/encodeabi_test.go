package trigger

import (
	"fmt"
	"github.com/onrik/ethrpc"
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestEncodeMethod(t *testing.T) {

	methodName := "daoCreator"
	abiInput := `[{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"proposals","outputs":[{"name":"recipient","type":"address"},{"name":"amount","type":"uint256"},{"name":"description","type":"string"},{"name":"votingDeadline","type":"uint256"},{"name":"open","type":"bool"},{"name":"proposalPassed","type":"bool"},{"name":"proposalHash","type":"bytes32"},{"name":"proposalDeposit","type":"uint256"},{"name":"newCurator","type":"bool"},{"name":"yea","type":"uint256"},{"name":"nay","type":"uint256"},{"name":"creator","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_amount","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"minTokensToCreate","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"rewardAccount","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[],"name":"daoCreator","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"divisor","outputs":[{"name":"divisor","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"extraBalance","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_proposalID","type":"uint256"},{"name":"_transactionData","type":"bytes"}],"name":"executeProposal","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"unblockMe","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"totalRewardToken","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"actualBalance","outputs":[{"name":"_actualBalance","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"closingTime","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"allowedRecipients","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferWithoutReward","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"refund","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"_recipient","type":"address"},{"name":"_amount","type":"uint256"},{"name":"_description","type":"string"},{"name":"_transactionData","type":"bytes"},{"name":"_debatingPeriod","type":"uint256"},{"name":"_newCurator","type":"bool"}],"name":"newProposal","outputs":[{"name":"_proposalID","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"DAOpaidOut","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"minQuorumDivisor","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_newContract","type":"address"}],"name":"newContract","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_recipient","type":"address"},{"name":"_allowed","type":"bool"}],"name":"changeAllowedRecipients","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"halveMinQuorum","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"paidOut","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_proposalID","type":"uint256"},{"name":"_newCurator","type":"address"}],"name":"splitDAO","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"DAOrewardAccount","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[],"name":"proposalDeposit","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"numberOfProposals","outputs":[{"name":"_numberOfProposals","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"lastTimeMinQuorumMet","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_toMembers","type":"bool"}],"name":"retrieveDAOReward","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"receiveEther","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"isFueled","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"_tokenHolder","type":"address"}],"name":"createTokenProxy","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"_proposalID","type":"uint256"}],"name":"getNewDAOAddress","outputs":[{"name":"_newDAO","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_proposalID","type":"uint256"},{"name":"_supportsProposal","type":"bool"}],"name":"vote","outputs":[{"name":"_voteID","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[],"name":"getMyReward","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"rewardToken","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFromWithoutReward","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_proposalDeposit","type":"uint256"}],"name":"changeProposalDeposit","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"blocked","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"curator","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[{"name":"_proposalID","type":"uint256"},{"name":"_recipient","type":"address"},{"name":"_amount","type":"uint256"},{"name":"_transactionData","type":"bytes"}],"name":"checkProposalCode","outputs":[{"name":"_codeChecksOut","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"privateCreation","outputs":[{"name":"","type":"address"}],"type":"function"},{"inputs":[{"name":"_curator","type":"address"},{"name":"_daoCreator","type":"address"},{"name":"_proposalDeposit","type":"uint256"},{"name":"_minTokensToCreate","type":"uint256"},{"name":"_closingTime","type":"uint256"},{"name":"_privateCreation","type":"address"}],"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_amount","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_amount","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"value","type":"uint256"}],"name":"FuelingToDate","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"CreatedToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Refund","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"proposalID","type":"uint256"},{"indexed":false,"name":"recipient","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"newCurator","type":"bool"},{"indexed":false,"name":"description","type":"string"}],"name":"ProposalAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"proposalID","type":"uint256"},{"indexed":false,"name":"position","type":"bool"},{"indexed":true,"name":"voter","type":"address"}],"name":"Voted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"proposalID","type":"uint256"},{"indexed":false,"name":"result","type":"bool"},{"indexed":false,"name":"quorum","type":"uint256"}],"name":"ProposalTallied","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_newCurator","type":"address"}],"name":"NewCurator","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_recipient","type":"address"},{"indexed":false,"name":"_allowed","type":"bool"}],"name":"AllowedRecipientChanged","type":"event"}]`

	res, err := encodeMethod(methodName, abiInput, nil)

	assert.Equal(t, err, nil)
	assert.Equal(t, res, "0x149acf9a")
}

func TestEncodeMethod2(t *testing.T) {

	methodName := "balanceOf"
	abiInput := `[{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"proposals","outputs":[{"name":"recipient","type":"address"},{"name":"amount","type":"uint256"},{"name":"description","type":"string"},{"name":"votingDeadline","type":"uint256"},{"name":"open","type":"bool"},{"name":"proposalPassed","type":"bool"},{"name":"proposalHash","type":"bytes32"},{"name":"proposalDeposit","type":"uint256"},{"name":"newCurator","type":"bool"},{"name":"yea","type":"uint256"},{"name":"nay","type":"uint256"},{"name":"creator","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_amount","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"minTokensToCreate","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"rewardAccount","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[],"name":"daoCreator","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"divisor","outputs":[{"name":"divisor","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"extraBalance","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_proposalID","type":"uint256"},{"name":"_transactionData","type":"bytes"}],"name":"executeProposal","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"unblockMe","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"totalRewardToken","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"actualBalance","outputs":[{"name":"_actualBalance","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"closingTime","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"allowedRecipients","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferWithoutReward","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"refund","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"_recipient","type":"address"},{"name":"_amount","type":"uint256"},{"name":"_description","type":"string"},{"name":"_transactionData","type":"bytes"},{"name":"_debatingPeriod","type":"uint256"},{"name":"_newCurator","type":"bool"}],"name":"newProposal","outputs":[{"name":"_proposalID","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"DAOpaidOut","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"minQuorumDivisor","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_newContract","type":"address"}],"name":"newContract","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_recipient","type":"address"},{"name":"_allowed","type":"bool"}],"name":"changeAllowedRecipients","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"halveMinQuorum","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"paidOut","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_proposalID","type":"uint256"},{"name":"_newCurator","type":"address"}],"name":"splitDAO","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"DAOrewardAccount","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[],"name":"proposalDeposit","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"numberOfProposals","outputs":[{"name":"_numberOfProposals","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"lastTimeMinQuorumMet","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_toMembers","type":"bool"}],"name":"retrieveDAOReward","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"receiveEther","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"isFueled","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"_tokenHolder","type":"address"}],"name":"createTokenProxy","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"_proposalID","type":"uint256"}],"name":"getNewDAOAddress","outputs":[{"name":"_newDAO","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_proposalID","type":"uint256"},{"name":"_supportsProposal","type":"bool"}],"name":"vote","outputs":[{"name":"_voteID","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[],"name":"getMyReward","outputs":[{"name":"_success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"rewardToken","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFromWithoutReward","outputs":[{"name":"success","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_proposalDeposit","type":"uint256"}],"name":"changeProposalDeposit","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"blocked","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"curator","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[{"name":"_proposalID","type":"uint256"},{"name":"_recipient","type":"address"},{"name":"_amount","type":"uint256"},{"name":"_transactionData","type":"bytes"}],"name":"checkProposalCode","outputs":[{"name":"_codeChecksOut","type":"bool"}],"type":"function"},{"constant":true,"inputs":[],"name":"privateCreation","outputs":[{"name":"","type":"address"}],"type":"function"},{"inputs":[{"name":"_curator","type":"address"},{"name":"_daoCreator","type":"address"},{"name":"_proposalDeposit","type":"uint256"},{"name":"_minTokensToCreate","type":"uint256"},{"name":"_closingTime","type":"uint256"},{"name":"_privateCreation","type":"address"}],"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_amount","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_amount","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"value","type":"uint256"}],"name":"FuelingToDate","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"CreatedToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Refund","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"proposalID","type":"uint256"},{"indexed":false,"name":"recipient","type":"address"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"newCurator","type":"bool"},{"indexed":false,"name":"description","type":"string"}],"name":"ProposalAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"proposalID","type":"uint256"},{"indexed":false,"name":"position","type":"bool"},{"indexed":true,"name":"voter","type":"address"}],"name":"Voted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"proposalID","type":"uint256"},{"indexed":false,"name":"result","type":"bool"},{"indexed":false,"name":"quorum","type":"uint256"}],"name":"ProposalTallied","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_newCurator","type":"address"}],"name":"NewCurator","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_recipient","type":"address"},{"indexed":false,"name":"_allowed","type":"bool"}],"name":"AllowedRecipientChanged","type":"event"}]`

	inputs := []Input{{"Address", "0xda4a4626d3e16e094de3225a751aab7128e96526"}}
	res, err := encodeMethod(methodName, abiInput, inputs)

	assert.Equal(t, err, nil)
	assert.Equal(t, res, "0x70a08231000000000000000000000000da4a4626d3e16e094de3225a751aab7128e96526")
}

func TestEncodeMethod3(t *testing.T) {
	// contract: 0x0aC10Bf0342FA2724E93D250751186ba5b659303
	abiInput := `[{"constant":false,"inputs":[{"name":"_trade_address","type":"address"}],"name":"set_trade_address","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_slave","type":"uint16"},{"name":"_domain","type":"uint16"}],"name":"inquire_cooltime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_arina","type":"uint256"}],"name":"withdraw_arina","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_eth_wei","type":"uint256"}],"name":"withdraw_ETH","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"all_stop","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"member","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_typeid","type":"uint8"}],"name":"inquire_type_price","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_city","type":"uint16"},{"name":"_domain","type":"uint16"}],"name":"fly","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"_address","type":"address"}],"name":"inquire_GIClevel","outputs":[{"name":"_level","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint8"}],"name":"area","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_mix_address","type":"address"}],"name":"set_mix_address","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_slave","type":"uint16"},{"name":"_domain","type":"uint16"}],"name":"inquire_tot_attribute","outputs":[{"name":"","type":"uint8[5]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_slave","type":"uint16"}],"name":"inquire_slave_address","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint8"}],"name":"building_type","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_index","type":"uint16"},{"name":"newMayor_address","type":"address"}],"name":"set_slave_mayor","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_class","type":"uint8"},{"name":"_city","type":"uint16"}],"name":"all_reward","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_type","type":"uint8"},{"name":"_price","type":"uint256"}],"name":"set_type_price","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_index","type":"uint16"},{"name":"_cooltime","type":"uint256"}],"name":"set_cooltime","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"probability","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"manager","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_address","type":"address"}],"name":"inquire_status","outputs":[{"name":"","type":"bool"},{"name":"","type":"bool"},{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"withdraw_all_ETH","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_city","type":"uint16"},{"name":"_domain","type":"uint16"}],"name":"inquire_owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_class","type":"uint8"},{"name":"_city","type":"uint16"},{"name":"_domains_id","type":"uint16"}],"name":"reward","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_city","type":"uint16"},{"name":"_domain","type":"uint16"}],"name":"inquire_domain_level_star","outputs":[{"name":"","type":"uint8"},{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_index","type":"uint16"},{"name":"_address","type":"address"}],"name":"change_slave_address","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_slave","type":"uint16"},{"name":"_domain","type":"uint16"},{"name":"_index","type":"uint8"}],"name":"inquire_building","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_city","type":"uint16"}],"name":"mayor_all_reward","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_city","type":"uint16"},{"name":"_id","type":"uint16"},{"name":"_index","type":"uint8"}],"name":"domain_attribute","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"buyLand_ETH","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"_city","type":"uint16"},{"name":"_domain","type":"uint16"}],"name":"inquire_have_owner","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_index","type":"uint16"}],"name":"inquire_city_totdomains","outputs":[{"name":"","type":"uint16"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"buyLandARINA_amount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"_type","type":"uint8"},{"name":"_name","type":"string"}],"name":"set_building_type","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"playLotto","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"rollDice","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_sender","type":"address"},{"name":"_value","type":"uint256"},{"name":"_tokenContract","type":"address"},{"name":"_extraData","type":"bytes"}],"name":"receiveApproval","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_level","type":"uint8"},{"name":"_star","type":"uint8"}],"name":"buyLandETH_amount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"x","type":"bytes32"}],"name":"bytes32ToString","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"_arina_address","type":"address"}],"name":"set_arina_address","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"payRent_ETH","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"_address","type":"address"}],"name":"inquire_location","outputs":[{"name":"","type":"uint16"},{"name":"","type":"uint16"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_level","type":"uint8"},{"name":"_star","type":"uint8"}],"name":"payRoadETH_amount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint8"}],"name":"building_price","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_city","type":"uint16"},{"name":"building","type":"uint8"}],"name":"checkBuildingPlayer","outputs":[{"name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_slave","type":"uint16"},{"name":"_domain","type":"uint16"}],"name":"inquire_tot_building","outputs":[{"name":"","type":"uint8[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"player_info","outputs":[{"name":"city","type":"uint16"},{"name":"domain","type":"uint16"},{"name":"unmovable","type":"bool"},{"name":"lotto","type":"bool"},{"name":"build","type":"bool"},{"name":"reward","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"}],"name":"push_slave_address","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_index","type":"uint8"},{"name":"_building","type":"uint8"}],"name":"reconstruction","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"_stop","type":"bool"}],"name":"set_all_stop","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"owner_slave","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"source","type":"string"}],"name":"stringToBytes32","outputs":[{"name":"result","type":"bytes32"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[],"name":"owner_slave_amount","outputs":[{"name":"","type":"uint16"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_slave","type":"uint16"},{"name":"_building","type":"uint8"}],"name":"inquire_building_amount","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_city","type":"uint16"}],"name":"inquire_own_domain","outputs":[{"name":"","type":"uint16[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_owner","type":"address"},{"name":"new_name","type":"string"}],"name":"set_member_name","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"_typeid","type":"uint8"}],"name":"inquire_type","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_city","type":"uint16"},{"name":"_value","type":"uint256"}],"name":"exchange","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"addressToName","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_level","type":"uint8"},{"name":"_star","type":"uint8"}],"name":"payARINA_amount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"_new_manager","type":"address"}],"name":"transferownership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_city","type":"uint16"},{"name":"_id","type":"uint16"}],"name":"inquire_land_info","outputs":[{"name":"","type":"uint8"},{"name":"","type":"uint8"},{"name":"","type":"uint8"},{"name":"","type":"uint8"},{"name":"","type":"uint8"},{"name":"","type":"uint8"},{"name":"","type":"uint8"},{"name":"","type":"uint8"},{"name":"","type":"uint8"},{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"withdraw_all_arina","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"string"}],"name":"register","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"set_name","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"time","type":"uint256"}],"name":"FirstSign","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"city","type":"uint16"},{"indexed":false,"name":"id","type":"uint16"},{"indexed":false,"name":"unmovable","type":"bool"}],"name":"RollDice","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"city","type":"uint16"},{"indexed":false,"name":"id","type":"uint16"},{"indexed":false,"name":"unmovable","type":"bool"}],"name":"Change_city","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"city","type":"uint16"},{"indexed":false,"name":"id","type":"uint16"},{"indexed":false,"name":"unmovable","type":"bool"}],"name":"Fly","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"player_number","type":"uint256"},{"indexed":false,"name":"lotto_number","type":"uint256"}],"name":"PlayLotto","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":false,"name":"city","type":"uint16"},{"indexed":false,"name":"id","type":"uint16"}],"name":"PayArina","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":false,"name":"city","type":"uint16"},{"indexed":false,"name":"id","type":"uint16"}],"name":"BuyArina","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":false,"name":"city","type":"uint16"},{"indexed":false,"name":"id","type":"uint16"}],"name":"PayEth","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":false,"name":"city","type":"uint16"},{"indexed":false,"name":"id","type":"uint16"}],"name":"BuyEth","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"building","type":"uint8"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Build","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"player","type":"address"},{"indexed":false,"name":"building","type":"uint8"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Reconstruction","type":"event"}]`

	// (uint16, uint16)
	methodName := "inquire_owner"
	inputs := []Input{{"uint16", "1"}, {"uint16", "2"}}
	res, err := encodeMethod(methodName, abiInput, inputs)

	assert.Equal(t, err, nil)
	assert.Equal(t, res, "0x4c0c15c400000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002")

	// uint8
	methodName = "building_type"
	inputs = []Input{{"uint8", "4"}}
	res, err = encodeMethod(methodName, abiInput, inputs)

	assert.Equal(t, err, nil)
	assert.Equal(t, res, "0x393648f80000000000000000000000000000000000000000000000000000000000000004")
}

func TestEncodeMethod4(t *testing.T) {
	// contract: 0xD73bE539d6B2076BaB83CA6Ba62DfE189aBC6Bbe
	abiInput := `[{"constant":true,"inputs":[],"name":"gen0CutieCreatedCount","outputs":[{"name":"","type":"uint40"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"interfaceID","type":"bytes4"}],"name":"supportsInterface","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_cutieId","type":"uint40"}],"name":"canBreed","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"_name","type":"string"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_party1","type":"address"},{"name":"_party2","type":"address"},{"name":"_party3","type":"address"},{"name":"_party4","type":"address"},{"name":"_party5","type":"address"}],"name":"setParties","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_cutieId","type":"uint256"}],"name":"approve","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"upgradedContractAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"addressToApprovedAll","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint40"}],"name":"cutieIndexToApproved","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_dadId","type":"uint40"}],"name":"bidOnBreedingAuctionTutorial","outputs":[{"name":"","type":"uint256"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"_genes","type":"uint256"},{"name":"_owner","type":"address"}],"name":"createPromoCutie","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_id","type":"uint40"}],"name":"getCooldownIndex","outputs":[{"name":"cooldownIndex","type":"uint16"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"name":"cutieId","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_id","type":"uint40"}],"name":"getOptional","outputs":[{"name":"optional","type":"uint64"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"unpause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newMinSignId","type":"uint40"}],"name":"setMinSign","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_breedingAddress","type":"address"},{"name":"_saleAddress","type":"address"}],"name":"setMarketAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_pluginAddress","type":"address"},{"name":"_signId","type":"uint40"},{"name":"_cutieId","type":"uint40"},{"name":"_value","type":"uint128"},{"name":"_parameter","type":"uint256"},{"name":"_v","type":"uint8"},{"name":"_r","type":"bytes32"},{"name":"_s","type":"bytes32"}],"name":"isValidSignature","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"plugins","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isCutieCore","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"_cutieId","type":"uint40"},{"name":"_startPrice","type":"uint128"},{"name":"_endPrice","type":"uint128"},{"name":"_duration","type":"uint40"}],"name":"createSaleAuction","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint40"}],"name":"sireAllowedToAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"breedingMarket","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_cutieId","type":"uint40"},{"name":"_generation","type":"uint16"}],"name":"changeGeneration","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"paused","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newAddress","type":"address"}],"name":"setUpgradedAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_cutieId","type":"uint256"}],"name":"ownerOf","outputs":[{"name":"owner","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_momId","type":"uint40"},{"name":"_dadId","type":"uint40"}],"name":"getBreedingFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_cutieId","type":"uint40"},{"name":"_optional","type":"uint64"}],"name":"changeOptional","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"withdrawBalances","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"count","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"withdrawEthFromBalance","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_cutieId","type":"uint40"},{"name":"_startPrice","type":"uint128"},{"name":"_endPrice","type":"uint128"},{"name":"_duration","type":"uint40"}],"name":"createBreedingAuction","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"config","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_metadataUrlPrefix","type":"string"},{"name":"_metadataUrlSuffix","type":"string"}],"name":"setMetadataUrl","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_oldAddress","type":"address"},{"name":"_fromIndex","type":"uint40"},{"name":"_toIndex","type":"uint40"},{"name":"saleAddress","type":"address"},{"name":"breedingAddress","type":"address"}],"name":"migrate2","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"}],"name":"setConfigAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"pause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_pluginAddress","type":"address"},{"name":"_cutieId","type":"uint40"},{"name":"_parameter","type":"uint256"}],"name":"runPlugin","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"promoLimit","outputs":[{"name":"","type":"uint40"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"minSignId","outputs":[{"name":"","type":"uint40"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_pluginAddress","type":"address"},{"name":"_signId","type":"uint40"},{"name":"_cutieId","type":"uint40"},{"name":"_value","type":"uint128"},{"name":"_parameter","type":"uint256"},{"name":"_v","type":"uint8"},{"name":"_r","type":"bytes32"},{"name":"_s","type":"bytes32"}],"name":"getSigner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"_symbol","type":"string"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"name":"_id","type":"uint40"}],"name":"getGenes","outputs":[{"name":"genes","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_pluginAddress","type":"address"},{"name":"_signId","type":"uint40"},{"name":"_cutieId","type":"uint40"},{"name":"_value","type":"uint128"},{"name":"_parameter","type":"uint256"},{"name":"_v","type":"uint8"},{"name":"_r","type":"bytes32"},{"name":"_s","type":"bytes32"}],"name":"runPluginSigned","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"_id","type":"uint40"}],"name":"getGeneration","outputs":[{"name":"generation","type":"uint16"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_genes","type":"uint256"},{"name":"startPrice","type":"uint128"},{"name":"endPrice","type":"uint128"},{"name":"duration","type":"uint40"}],"name":"createGen0Auction","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_operator","type":"address"},{"name":"_approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"}],"name":"removePlugin","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_cutieId","type":"uint40"},{"name":"_recipient","type":"address"}],"name":"restoreCutieToAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_cutieId","type":"uint256"}],"name":"transfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint40"}],"name":"cutieIndexToOwner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newOperator","type":"address"}],"name":"setOperator","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint40"}],"name":"usedSignes","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"},{"name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_pluginAddress","type":"address"},{"name":"_signId","type":"uint40"},{"name":"_cutieId","type":"uint40"},{"name":"_value","type":"uint128"},{"name":"_parameter","type":"uint256"}],"name":"hashArguments","outputs":[{"name":"msgHash","type":"bytes32"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"_momId","type":"uint40"},{"name":"_dadId","type":"uint40"}],"name":"breedWith","outputs":[{"name":"","type":"uint40"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"cuties","outputs":[{"name":"genes","type":"uint256"},{"name":"birthTime","type":"uint40"},{"name":"cooldownEndTime","type":"uint40"},{"name":"momId","type":"uint40"},{"name":"dadId","type":"uint40"},{"name":"cooldownIndex","type":"uint16"},{"name":"generation","type":"uint16"},{"name":"optional","type":"uint64"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_cutieId","type":"uint40"},{"name":"_cooldownEndTime","type":"uint40"}],"name":"changeCooldownEndTime","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"metadataUrlPrefix","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"name":"infoUrl","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_cutieId","type":"uint40"},{"name":"_cooldownIndex","type":"uint16"}],"name":"changeCooldownIndex","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"metadataUrlSuffix","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"}],"name":"addPlugin","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_momId","type":"uint40"},{"name":"_dadId","type":"uint40"}],"name":"canBreedWith","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"promoCutieCreatedCount","outputs":[{"name":"","type":"uint40"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_cutieId","type":"uint40"},{"name":"_genes","type":"uint256"}],"name":"changeGenes","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"}],"name":"setGeneMixerAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"saleMarket","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_id","type":"uint40"}],"name":"getCutie","outputs":[{"name":"genes","type":"uint256"},{"name":"birthTime","type":"uint40"},{"name":"cooldownEndTime","type":"uint40"},{"name":"momId","type":"uint40"},{"name":"dadId","type":"uint40"},{"name":"cooldownIndex","type":"uint16"},{"name":"generation","type":"uint16"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"gen0Limit","outputs":[{"name":"","type":"uint40"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_oldAddress","type":"address"},{"name":"_fromIndex","type":"uint40"},{"name":"_toIndex","type":"uint40"}],"name":"migrate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"pluginsArray","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_dadId","type":"uint40"},{"name":"_momId","type":"uint40"}],"name":"bidOnBreedingAuction","outputs":[{"name":"","type":"uint256"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"_id","type":"uint40"}],"name":"getCooldownEndTime","outputs":[{"name":"cooldownEndTime","type":"uint40"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_addr","type":"address"},{"name":"_dadId","type":"uint40"}],"name":"approveBreeding","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_approved","type":"address"},{"indexed":false,"name":"_tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_operator","type":"address"},{"indexed":false,"name":"_approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":false,"name":"cutieId","type":"uint40"},{"indexed":false,"name":"momId","type":"uint40"},{"indexed":false,"name":"dadId","type":"uint40"},{"indexed":false,"name":"genes","type":"uint256"}],"name":"Birth","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"cutieId","type":"uint40"},{"indexed":false,"name":"oldValue","type":"uint256"},{"indexed":false,"name":"newValue","type":"uint256"}],"name":"GenesChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"cutieId","type":"uint40"},{"indexed":false,"name":"oldValue","type":"uint40"},{"indexed":false,"name":"newValue","type":"uint40"}],"name":"CooldownEndTimeChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"cutieId","type":"uint40"},{"indexed":false,"name":"ololdValue","type":"uint16"},{"indexed":false,"name":"newValue","type":"uint16"}],"name":"CooldownIndexChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"cutieId","type":"uint40"},{"indexed":false,"name":"oldValue","type":"uint16"},{"indexed":false,"name":"newValue","type":"uint16"}],"name":"GenerationChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"cutieId","type":"uint40"},{"indexed":false,"name":"oldValue","type":"uint64"},{"indexed":false,"name":"newValue","type":"uint64"}],"name":"OptionalChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"signId","type":"uint40"},{"indexed":false,"name":"sender","type":"address"}],"name":"SignUsed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"signId","type":"uint40"}],"name":"MinSignSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_approved","type":"address"},{"indexed":false,"name":"_tokenId","type":"uint256"}],"name":"BreedingApproval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"newContract","type":"address"}],"name":"ContractUpgrade","type":"event"}]`

	// uint40
	methodName := "getCooldownIndex"
	inputs := []Input{{"uint40", "3"}}
	res, err := encodeMethod(methodName, abiInput, inputs)

	assert.Equal(t, err, nil)
	assert.Equal(t, res, "0x2917f1620000000000000000000000000000000000000000000000000000000000000003")
}

func TestEncodeMethod5(t *testing.T) {
	// contract: 0x2aF0F9B7d975d11507dEbA15405c846C5f1fB152
	abiInput := `[{"name": "destroyContract", "type": "function", "inputs": [], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "addRewardNftFixedBulk", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}, {"name": "tokenIndex", "type": "uint128[]"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "isERC1155TokenReceiver", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "bytes4"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "bid", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "rate", "type": "uint256"}, {"name": "expireAt", "type": "uint256"}, {"name": "_v", "type": "uint8"}, {"name": "_r", "type": "bytes32"}, {"name": "_s", "type": "bytes32"}], "outputs": [], "payable": true, "constant": false, "stateMutability": "payable"}, {"name": "removeOwner", "type": "function", "inputs": [{"name": "_oldOwner", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setRewardToken1155", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "tokenId", "type": "uint256"}, {"name": "count", "type": "uint256"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "isOwner", "type": "function", "inputs": [{"name": "_addr", "type": "address"}], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "isAvailable", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "getSigner", "type": "function", "inputs": [{"name": "rate", "type": "uint256"}, {"name": "expireAt", "type": "uint256"}, {"name": "_v", "type": "uint8"}, {"name": "_r", "type": "bytes32"}, {"name": "_s", "type": "bytes32"}], "outputs": [{"name": "", "type": "address"}], "payable": false, "constant": true, "stateMutability": "pure"}, {"name": "unpause", "type": "function", "inputs": [], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "deleteLot", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setExpireTime", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "expireTime", "type": "uint32"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "bidWithPlugin", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "valueForEvent", "type": "uint256"}, {"name": "tokenForEvent", "type": "address"}], "outputs": [], "payable": true, "constant": false, "stateMutability": "payable"}, {"name": "signerAddress", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "address"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setRewardCutie", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "genome", "type": "uint256"}, {"name": "generation", "type": "uint16"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "paused", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setSigner", "type": "function", "inputs": [{"name": "_newSigner", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "isOperator", "type": "function", "inputs": [{"name": "_addr", "type": "address"}], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "addOwner", "type": "function", "inputs": [{"name": "_newOwner", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setRewardNftFixed", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}, {"name": "tokenIndex", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setToken1155", "type": "function", "inputs": [{"name": "_token1155", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "addRewardCutie", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "genome", "type": "uint256"}, {"name": "generation", "type": "uint16"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "pause", "type": "function", "inputs": [], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "getLot", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [{"name": "price", "type": "uint256"}, {"name": "left", "type": "uint256"}, {"name": "expireTime", "type": "uint256"}, {"name": "lotKind", "type": "uint256"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setRewardNftMint", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "addOperator", "type": "function", "inputs": [{"name": "_newOperator", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "token1155", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "address"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "addRewardNftMint", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "removeOperator", "type": "function", "inputs": [{"name": "_oldOperator", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "withdrawEthFromBalance", "type": "function", "inputs": [{"name": "value", "type": "uint256"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "onERC1155BatchReceived", "type": "function", "inputs": [{"name": "", "type": "address"}, {"name": "", "type": "address"}, {"name": "", "type": "uint256[]"}, {"name": "", "type": "uint256[]"}, {"name": "", "type": "bytes"}], "outputs": [{"name": "", "type": "bytes4"}], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "isValidSignature", "type": "function", "inputs": [{"name": "rate", "type": "uint256"}, {"name": "expireAt", "type": "uint256"}, {"name": "_v", "type": "uint8"}, {"name": "_r", "type": "bytes32"}, {"name": "_s", "type": "bytes32"}], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setLot", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "price", "type": "uint128"}, {"name": "count", "type": "uint128"}, {"name": "expireTime", "type": "uint32"}, {"name": "priceMul", "type": "uint128"}, {"name": "priceAdd", "type": "uint128"}, {"name": "lotKind", "type": "uint32"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "hashArguments", "type": "function", "inputs": [{"name": "rate", "type": "uint256"}, {"name": "expireAt", "type": "uint256"}], "outputs": [{"name": "msgHash", "type": "bytes32"}], "payable": false, "constant": true, "stateMutability": "pure"}, {"name": "withdrawERC20FromBalance", "type": "function", "inputs": [{"name": "_tokenContract", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "lots", "type": "function", "inputs": [{"name": "", "type": "uint32"}], "outputs": [{"name": "price", "type": "uint128"}, {"name": "leftCount", "type": "uint128"}, {"name": "priceMul", "type": "uint128"}, {"name": "priceAdd", "type": "uint128"}, {"name": "expireTime", "type": "uint32"}, {"name": "lotKind", "type": "uint32"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "addRewardNftFixed", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}, {"name": "tokenIndex", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "addRewardToken1155", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "tokenId", "type": "uint256"}, {"name": "count", "type": "uint256"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "withdrawERC1155FromBalance", "type": "function", "inputs": [{"name": "_tokenContract", "type": "address"}, {"name": "tokenId", "type": "uint256"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setPrice", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "price", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setCutieGenerator", "type": "function", "inputs": [{"name": "_cutieGenerator", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "getLotRewards", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [{"name": "price", "type": "uint256"}, {"name": "left", "type": "uint256"}, {"name": "expireTime", "type": "uint256"}, {"name": "priceMul", "type": "uint128"}, {"name": "priceAdd", "type": "uint128"}, {"name": "rewardsToken1155tokenId", "type": "uint256[5]"}, {"name": "rewardsToken1155count", "type": "uint256[5]"}, {"name": "rewardsNFTMintNftKind", "type": "uint256[5]"}, {"name": "rewardsNFTFixedKind", "type": "uint256[5]"}, {"name": "rewardsNFTFixedIndex", "type": "uint256[5]"}, {"name": "rewardsCutieGenome", "type": "uint256[5]"}, {"name": "rewardsCutieGeneration", "type": "uint256[5]"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setLotLeftCount", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "count", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "bidNative", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [], "payable": true, "constant": false, "stateMutability": "payable"}, {"name": "cutieGenerator", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "address"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "onERC1155Received", "type": "function", "inputs": [{"name": "", "type": "address"}, {"name": "", "type": "address"}, {"name": "", "type": "uint256"}, {"name": "", "type": "uint256"}, {"name": "", "type": "bytes"}], "outputs": [{"name": "", "type": "bytes4"}], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "deleteRewards", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"type": "fallback", "payable": true, "stateMutability": "payable"}, {"name": "Bid", "type": "event", "inputs": [{"name": "purchaser", "type": "address", "indexed": true}, {"name": "lotId", "type": "uint32", "indexed": true}, {"name": "value", "type": "uint256", "indexed": false}, {"name": "token", "type": "address", "indexed": true}], "anonymous": false}, {"name": "LotChange", "type": "event", "inputs": [{"name": "lotId", "type": "uint32", "indexed": true}], "anonymous": false}, {"name": "Pause", "type": "event", "inputs": [], "anonymous": false}, {"name": "Unpause", "type": "event", "inputs": [], "anonymous": false}]`

	// uint32
	methodName := "lots"
	inputs := []Input{{"uint32", "10"}}
	res, err := encodeMethod(methodName, abiInput, inputs)

	assert.Equal(t, err, nil)
	assert.Equal(t, res, "0xca5946f7000000000000000000000000000000000000000000000000000000000000000a")
}

// lil function to check that when calling ETH with our argument it returns what we want
func TestReturnValue(t *testing.T) {

	abiInput := `[{"name": "destroyContract", "type": "function", "inputs": [], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "addRewardNftFixedBulk", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}, {"name": "tokenIndex", "type": "uint128[]"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "isERC1155TokenReceiver", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "bytes4"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "bid", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "rate", "type": "uint256"}, {"name": "expireAt", "type": "uint256"}, {"name": "_v", "type": "uint8"}, {"name": "_r", "type": "bytes32"}, {"name": "_s", "type": "bytes32"}], "outputs": [], "payable": true, "constant": false, "stateMutability": "payable"}, {"name": "removeOwner", "type": "function", "inputs": [{"name": "_oldOwner", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setRewardToken1155", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "tokenId", "type": "uint256"}, {"name": "count", "type": "uint256"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "isOwner", "type": "function", "inputs": [{"name": "_addr", "type": "address"}], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "isAvailable", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "getSigner", "type": "function", "inputs": [{"name": "rate", "type": "uint256"}, {"name": "expireAt", "type": "uint256"}, {"name": "_v", "type": "uint8"}, {"name": "_r", "type": "bytes32"}, {"name": "_s", "type": "bytes32"}], "outputs": [{"name": "", "type": "address"}], "payable": false, "constant": true, "stateMutability": "pure"}, {"name": "unpause", "type": "function", "inputs": [], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "deleteLot", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setExpireTime", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "expireTime", "type": "uint32"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "bidWithPlugin", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "valueForEvent", "type": "uint256"}, {"name": "tokenForEvent", "type": "address"}], "outputs": [], "payable": true, "constant": false, "stateMutability": "payable"}, {"name": "signerAddress", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "address"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setRewardCutie", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "genome", "type": "uint256"}, {"name": "generation", "type": "uint16"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "paused", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setSigner", "type": "function", "inputs": [{"name": "_newSigner", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "isOperator", "type": "function", "inputs": [{"name": "_addr", "type": "address"}], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "addOwner", "type": "function", "inputs": [{"name": "_newOwner", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setRewardNftFixed", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}, {"name": "tokenIndex", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setToken1155", "type": "function", "inputs": [{"name": "_token1155", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "addRewardCutie", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "genome", "type": "uint256"}, {"name": "generation", "type": "uint16"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "pause", "type": "function", "inputs": [], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "getLot", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [{"name": "price", "type": "uint256"}, {"name": "left", "type": "uint256"}, {"name": "expireTime", "type": "uint256"}, {"name": "lotKind", "type": "uint256"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setRewardNftMint", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "addOperator", "type": "function", "inputs": [{"name": "_newOperator", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "token1155", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "address"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "addRewardNftMint", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "removeOperator", "type": "function", "inputs": [{"name": "_oldOperator", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "withdrawEthFromBalance", "type": "function", "inputs": [{"name": "value", "type": "uint256"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "onERC1155BatchReceived", "type": "function", "inputs": [{"name": "", "type": "address"}, {"name": "", "type": "address"}, {"name": "", "type": "uint256[]"}, {"name": "", "type": "uint256[]"}, {"name": "", "type": "bytes"}], "outputs": [{"name": "", "type": "bytes4"}], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "isValidSignature", "type": "function", "inputs": [{"name": "rate", "type": "uint256"}, {"name": "expireAt", "type": "uint256"}, {"name": "_v", "type": "uint8"}, {"name": "_r", "type": "bytes32"}, {"name": "_s", "type": "bytes32"}], "outputs": [{"name": "", "type": "bool"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setLot", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "price", "type": "uint128"}, {"name": "count", "type": "uint128"}, {"name": "expireTime", "type": "uint32"}, {"name": "priceMul", "type": "uint128"}, {"name": "priceAdd", "type": "uint128"}, {"name": "lotKind", "type": "uint32"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "hashArguments", "type": "function", "inputs": [{"name": "rate", "type": "uint256"}, {"name": "expireAt", "type": "uint256"}], "outputs": [{"name": "msgHash", "type": "bytes32"}], "payable": false, "constant": true, "stateMutability": "pure"}, {"name": "withdrawERC20FromBalance", "type": "function", "inputs": [{"name": "_tokenContract", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "lots", "type": "function", "inputs": [{"name": "", "type": "uint32"}], "outputs": [{"name": "price", "type": "uint128"}, {"name": "leftCount", "type": "uint128"}, {"name": "priceMul", "type": "uint128"}, {"name": "priceAdd", "type": "uint128"}, {"name": "expireTime", "type": "uint32"}, {"name": "lotKind", "type": "uint32"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "addRewardNftFixed", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "nftType", "type": "uint128"}, {"name": "tokenIndex", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "addRewardToken1155", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "tokenId", "type": "uint256"}, {"name": "count", "type": "uint256"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "withdrawERC1155FromBalance", "type": "function", "inputs": [{"name": "_tokenContract", "type": "address"}, {"name": "tokenId", "type": "uint256"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setPrice", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "price", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "setCutieGenerator", "type": "function", "inputs": [{"name": "_cutieGenerator", "type": "address"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "getLotRewards", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [{"name": "price", "type": "uint256"}, {"name": "left", "type": "uint256"}, {"name": "expireTime", "type": "uint256"}, {"name": "priceMul", "type": "uint128"}, {"name": "priceAdd", "type": "uint128"}, {"name": "rewardsToken1155tokenId", "type": "uint256[5]"}, {"name": "rewardsToken1155count", "type": "uint256[5]"}, {"name": "rewardsNFTMintNftKind", "type": "uint256[5]"}, {"name": "rewardsNFTFixedKind", "type": "uint256[5]"}, {"name": "rewardsNFTFixedIndex", "type": "uint256[5]"}, {"name": "rewardsCutieGenome", "type": "uint256[5]"}, {"name": "rewardsCutieGeneration", "type": "uint256[5]"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "setLotLeftCount", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}, {"name": "count", "type": "uint128"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "bidNative", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [], "payable": true, "constant": false, "stateMutability": "payable"}, {"name": "cutieGenerator", "type": "function", "inputs": [], "outputs": [{"name": "", "type": "address"}], "payable": false, "constant": true, "stateMutability": "view"}, {"name": "onERC1155Received", "type": "function", "inputs": [{"name": "", "type": "address"}, {"name": "", "type": "address"}, {"name": "", "type": "uint256"}, {"name": "", "type": "uint256"}, {"name": "", "type": "bytes"}], "outputs": [{"name": "", "type": "bytes4"}], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"name": "deleteRewards", "type": "function", "inputs": [{"name": "lotId", "type": "uint32"}], "outputs": [], "payable": false, "constant": false, "stateMutability": "nonpayable"}, {"type": "fallback", "payable": true, "stateMutability": "payable"}, {"name": "Bid", "type": "event", "inputs": [{"name": "purchaser", "type": "address", "indexed": true}, {"name": "lotId", "type": "uint32", "indexed": true}, {"name": "value", "type": "uint256", "indexed": false}, {"name": "token", "type": "address", "indexed": true}], "anonymous": false}, {"name": "LotChange", "type": "event", "inputs": [{"name": "lotId", "type": "uint32", "indexed": true}], "anonymous": false}, {"name": "Pause", "type": "event", "inputs": [], "anonymous": false}, {"name": "Unpause", "type": "event", "inputs": [], "anonymous": false}]`
	res1, err := encodeMethod("lots", abiInput, []Input{{"uint32", "10"}})
	if err != nil {
		t.Error(err)
	}

	fmt.Println("encoded req: ", res1)

	cli := ethrpc.New(zconf.EthNode)
	res, err := makeEthRpcCall(
		cli,
		"0x2aF0F9B7d975d11507dEbA15405c846C5f1fB152",
		res1,
		8386979)

	if err != nil {
		t.Error(err)
	}
	fmt.Println("result: ", res)
}
